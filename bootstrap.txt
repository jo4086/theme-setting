## === ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ PowerShell ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ í•œë²ˆì— ë³µì‚¬ ë¶™ì—¬ë„£ê¸°ë¡œ ì‹¤í–‰ ===

function reloadPath { $env:PATH = [System.Environment]::GetEnvironmentVariable("Path", "Machine") }
Set-ExecutionPolicy Bypass -Scope Process -Force
$SetupPath = $env:USERPROFILE\Desktop

New-Item -Path "$SetupPath\setups" -ItemType Directory -Force
cd "$SetupPath\setups"

add-Content -Path ".\start.ps1" -Value '$BashInstallSuccess = $false'
add-Content -Path ".\start.ps1" -Value ''
add-Content -Path ".\start.ps1" -Value 'if (Get-Command git -ErrorAction SilentlyContinue) {'
add-Content -Path ".\start.ps1" -Value '  Write-Host "âœ… Git ì„¤ì¹˜ë¨"'
add-Content -Path ".\start.ps1" -Value '  Write-Host "ğŸ“ ê²½ë¡œ: $((Get-Command git).Source)"'
add-Content -Path ".\start.ps1" -Value '  git --version'
add-Content -Path ".\start.ps1" -Value '  $BashInstallSuccess = $true'
add-Content -Path ".\start.ps1" -Value '  } else {'
add-Content -Path ".\start.ps1" -Value '  Write-Host "âŒ Git ì„¤ì¹˜ ì•ˆë¨, ì„¤ì¹˜ ì§„í–‰í•˜ì„¸ìš”."'
add-Content -Path ".\start.ps1" -Value '}'
add-Content -Path ".\start.ps1" -Value ''
add-Content -Path ".\start.ps1" -Value 'if (!$BashInstallSuccess) {'
add-Content -Path ".\start.ps1" -Value '  try {'
add-Content -Path ".\start.ps1" -Value '    Write-Host "Installing Git (v2.49.0-64-bit)..."'
add-Content -Path ".\start.ps1" -Value '    $InstallerPath = "$env:TEMP\gitbash-installer.exe"'
add-Content -Path ".\start.ps1" -Value ''
add-Content -Path ".\start.ps1" -Value '    Invoke-WebRequest -Uri "https://github.com/git-for-windows/git/releases/download/v2.49.0.windows.1/Git-2.49.0-64-bit.exe" -OutFile $InstallerPath'
add-Content -Path ".\start.ps1" -Value ''
add-Content -Path ".\start.ps1" -Value '    Start-Process -FilePath $InstallerPath -ArgumentList "/VERYSILENT", "/NORESTART" -Wait'
add-Content -Path ".\start.ps1" -Value ''
add-Content -Path ".\start.ps1" -Value '    Write-Host "âœ… Git-Bash (v.2.49.0-64-bit) ì„¤ì¹˜ ì„±ê³µ..."'
add-Content -Path ".\start.ps1" -Value '    $BashInstallSuccess = $true'
add-Content -Path ".\start.ps1" -Value '  } catch {'
add-Content -Path ".\start.ps1" -Value '    Write-Host "âŒ Git (v2.49.0-64-bit) ì„¤ì¹˜ ì‹¤íŒ¨"'
add-Content -Path ".\start.ps1" -Value '  }'
add-Content -Path ".\start.ps1" -Value '}'
add-Content -Path ".\start.ps1" -Value ''
add-Content -Path ".\start.ps1" -Value 'if ($BashInstallSuccess) {'
add-Content -Path ".\start.ps1" -Value '   reloadPath'
add-Content -Path ".\start.ps1" -Value '   git clone https://github.com/jo4086/theme-setting.git $env:USERPROFILE\Desktop\setup-flow'
add-Content -Path ".\start.ps1" -Value '   cd $env:USERPROFILE\Desktop\setup-flow'
add-Content -Path ".\start.ps1" -Value '   .\script\install.ps1'
add-Content -Path ".\start.ps1" -Value '}'

.\start.ps1

## === ì—¬ê¸°ê¹Œì§€ ë³µë¶™ ===

## STEP 2. Git
# 2-1. ê¹ƒ ë°°ì‰¬ ìœ„ì¹˜ì´ë™
cd $HOME/Desktop/setup-flow

# 2-2. ìŠ¤í¬ë¦½íŠ¸ ê¶Œí•œ í—ˆìš©
chmod +x ./git-setup.sh

# 2-3. ê¹ƒ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./script/git-setup.sh

## STEP 3. windowsTerminal ìˆ˜ë™ ì¡°ì‘
# 3-1. ì„¤ì¹˜
https://github.com/microsoft/terminal/releases/download/v1.22.10731.0/Microsoft.WindowsTerminal_1.22.10731.0_x64.zip

1. Icon ìœ„ì¹˜: C:\Program Files\Git\mingw64\share\git\git-for-windows.ico
2. ëª…ë ¹ì¤„ ìœ„ì¹˜:  C:/Program Files/Git/bin/bash.exe -i -l